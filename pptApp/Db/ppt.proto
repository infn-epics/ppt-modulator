# StreamDevice Protocol File for PPT Modulator Binary TCP Stream
# Total data size: 43 words (86 bytes)
# Each word is 2 bytes (LSB + MSB)
# Device responds on TCP port 2000

# Terminator for binary protocols
Terminator = "";
ReplyTimeout = 1000;
ReadTimeout = 100;

# ============================================================================
# Read all data as one binary block (86 bytes)
# This is the ONLY protocol needed - all data extraction happens in EPICS
# ============================================================================
readAllData {
    in "%86r";
}

# ============================================================================
# OPTIMIZATION NOTES:
# ============================================================================
# Previous version had 43 separate protocol definitions, one for each word.
# This meant 43 separate TCP reads per scan cycle.
# 
# New approach:
# - Single TCP read gets all 86 bytes
# - EPICS calc records extract individual 16-bit words
# - Data consistency: all values from same snapshot
# - Network efficiency: 1 read instead of 43 reads
# - Reduced latency and device load
# ============================================================================
